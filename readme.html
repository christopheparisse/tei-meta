<h1 id="teimeta-edit">teimeta-edit</h1>
<p><strong>Outil d&#39;édition de champs xml dans un fichier xml à partir d&#39;une description odd</strong></p>
<h2 id="acc-s-l-outil">Accès à l&#39;outil</h2>
<p>Utilisation en ligne: <a href="http://ct3.ortolang.fr/teimeta/">http://ct3.ortolang.fr/teimeta/</a></p>
<p>Téléchargement application autonome pour MacOs: <a href="http://ct3.ortolang.fr/download/teimeta-v0.4.6-macos.zip">http://ct3.ortolang.fr/download/teimeta-v0.4.6-macos.zip</a></p>
<p>Téléchargement application windows 64 bits: <a href="http://ct3.ortolang.fr/download/teimeta-v0.4.6-x64.exe">http://ct3.ortolang.fr/download/teimeta-v0.4.6-x64.exe</a></p>
<p>Téléchargement application windows 32 bits: <a href="http://ct3.ortolang.fr/download/teimeta-v0.4.6-x86.exe">http://ct3.ortolang.fr/download/teimeta-v0.4.6-x86.exe</a></p>
<h2 id="description-g-n-rale">Description générale</h2>
<p>L&#39;outil est conçu pour une utilisation TEI mais peut être utilsé pour d&#39;autres fichiers XML.
Dans ce cas il faut éditer un fichier ayant un namespace correct ou modifier le namespace du fichier final à la main.
L&#39;édition du namespace destination n&#39;est pas encore implémentée.</p>
<p>L&#39;outil permet d&#39;éditer un noeud XML où qu&#39;il soit mais pas de le déplacer.
Tout noeud édité garde sa position. Un noeud inexistant peut être créé, mais selon la position décrite dans l&#39;ODD.
L&#39;ODD doit décrire toute l&#39;arborescence depuis la racine.
Les valeurs d&#39;un fichier XML non décrites dans l&#39;ODD ne doivent pas être modifiées.
Les valeurs décrites pevuent être créées, modifiées et vidées. La suppression est possible en désactivant les noeuds non-obligatoires.
Il est possible en option (pas encore implémentée d&#39;autoriser la suppression des noeuds obligatoires).</p>
<p>Les fonctions d&#39;édition principales sont:</p>
<ul>
<li>création d&#39;un noeud (si on y ajoute une valeur)</li>
<li>édition du champ texte d&#39;un noeud avec un format<ul>
<li>texte libre</li>
<li>vocabulaire</li>
<li>nombre (à faire)</li>
<li>date (à faire)</li>
</ul>
</li>
<li>édition d&#39;un des attributs d&#39;un noeud avec un format<ul>
<li>texte libre</li>
<li>vocabulaire</li>
<li>nombre (à faire)</li>
<li>date (à faire)</li>
</ul>
</li>
</ul>
<h2 id="edition-de-l-odd-et-exemples-xml">Edition de l&#39;ODD et exemples XML</h2>
<p>L&#39;ODD respecte le format de la TEI prévu pour ajouter des tags à la TEI.
On utilise les champs desc pour fournir des informations.
Les champs corresp, rend et rendition ont une fonctionnalité supplémentaire par rapport à la TEI pour notre implémentation.
Les autres champs respectent complétement le format TEI.</p>
<h3 id="format-de-description-des-noeuds-xml">Format de description des noeuds XML</h3>
<p>Le contenu du ODD consiste en des éléments elementSpec qui peuvent référencer d&#39;autres éléments avec elementRef.
Les moduleRef ne sont pas utilisés pour l&#39;instant: ils sont là pour les autres usages des ODD.</p>
<ul>
<li><p>schemaSpec</p>
<ul>
<li>start = racine du fichier xml résultat</li>
<li>ns = namespace pour le fichier xml résultat</li>
</ul>
</li>
<li><p>elementSpec</p>
<ul>
<li>ident=&quot;nom du tag dans la TEI&quot; corresp=&quot;tag optionel à utiliser si ident n&#39;est pas unique&quot;</li>
<li>desc: multilingue possible voir champ xml:lang</li>
<li>content: contenu du noeud y compris partie texte</li>
<li>attList: listes des attributs</li>
</ul>
</li>
<li><p>content</p>
<ul>
<li>sequence minOccurs maxOccurs (s&#39;il y a plus d&#39;un élément)<ul>
<li>elementRef key=&quot;nom du tag dans la TEI&quot; corresp=&quot;tag optionel à utiliser si ident n&#39;est pas unique&quot;</li>
<li>elementRef key=...</li>
<li>elementRef minOccurs maxOccurs (min et max sont optionels: omis ils valent 1)</li>
</ul>
</li>
<li>textNode<ul>
<li>dataRef : pour indiquer le format du noeud (à la place de textNode)</li>
<li>integer decimal NCName string duration anyURI data - si rien pas de contrôle de format exemple titre</li>
<li>valList : si le node ne peut prendre que certaines valeurs prédéfinies</li>
</ul>
</li>
</ul>
</li>
<li><p>attList</p>
<ul>
<li>attDef ident=&quot;attribut-dans-TEI&quot; rend=&quot;valeur par défaut de l&#39;attribut dans les valeurs de la liste&quot; usage=&quot;rec ou req&quot;<ul>
<li>desc (multilingue)</li>
<li>desc = nom de la rubrique pour les sections, les élements à saisir, pour les valList =bulle d&#39;aide</li>
</ul>
</li>
<li>datatype<ul>
<li>dataRef : format de l&#39;attribut</li>
<li>... ou sinon une liste de valeurs: si une seule pas de choix valeur obigatoire</li>
</ul>
</li>
<li>valList ==&gt; choix multiples type ascenseur<ul>
<li>valItem ident=&quot;valeur-dans-TEI&quot;</li>
<li>desc (multilingue) + rendition (champ aide optionel ? - emplacement à affiner)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="exemple">Exemple</h4>
<pre><code>&lt;elementSpec ident=&quot;tag_TEI&quot; module=&quot;header&quot;
    corresp=&quot;nom_pour_identification_unique&quot;&gt;
    &lt;desc xml:lang=&quot;fr&quot;&gt;... en français ... - partie affichée pour décrire
        l&#39;élément&lt;/desc&gt;
    &lt;desc xml:lang=&quot;en&quot;&gt;... en anglais ...&lt;/desc&gt;
    &lt;content&gt;
        &lt;sequence minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;&gt;
            &lt;elementRef key=&quot;sous_tag_1&quot;
                corresp=&quot;autre_nom_pour_identification_unique&quot;/&gt;
            &lt;elementRef key=&quot;sous_tag_2&quot;/&gt;
        &lt;/sequence&gt;
        &lt;elementRef key=&quot;idno&quot; corresp=&quot;handle&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;unbounded&quot;/&gt;
        &lt;textNode/&gt;
        &lt;dataRef name=&quot;NCName&quot;/&gt;
    &lt;/content&gt;
    &lt;attList&gt;
        &lt;attDef ident=&quot;mimeType&quot; usage=&quot;req&quot; mode=&quot;change&quot;&gt;
            &lt;valList type=&quot;closed&quot;&gt;
                &lt;valItem ident=&quot;audio/wav&quot;/&gt;
                &lt;valItem ident=&quot;audio/mp3&quot;/&gt;
                &lt;valItem ident=&quot;other&quot;/&gt;
            &lt;/valList&gt;
        &lt;/attDef&gt;
        &lt;attDef ident=&quot;dur-iso&quot; usage=&quot;req&quot; mode=&quot;change&quot;&gt;
            &lt;desc xml:lang=&quot;fr&quot;&gt;durée du média : chaque medias peut avoir une durée
                différente&lt;/desc&gt;
            &lt;desc xml:lang=&quot;en&quot;&gt;media duration : each media could have a different
                duration &lt;/desc&gt;
            &lt;datatype&gt;
                &lt;dataRef name=&quot;duration&quot;/&gt;
            &lt;/datatype&gt;
        &lt;/attDef&gt;
    &lt;/attList&gt;
&lt;/elementSpec&gt;
</code></pre><h2 id="utilisation">Utilisation</h2>
<h3 id="version-page-html-fonctionnelle-">Version Page Html (fonctionnelle)</h3>
<p>Le soft comprend une page html autonome pouvant être utilisée localement ou à distance.
Il est possible de charger un ODD local et un XML local
La sauvegarde se fait dans le répertoire de téléchargement (ou ailleurs selon les paramètres du navigateur web).</p>
<pre><code>npm run page
# creation d&#39;un sous-répertoire temp-page
$ open temp-page/teimeta.html
</code></pre><h3 id="version-application-ind-pendante">Version application indépendante</h3>
<h4 id="application-teimeta">Application TEIMETA</h4>
<p>Le soft est intégré à Electron. Il présente les mêmes fonctionnalités que la version page html, mais peut être lancé
depuis le gestionnaire de fichiers ou d&#39;application, et être associé à une extension de programme. Possibilité d&#39;avoir un menu
fichiers récents et une vraie sauvegarde.</p>
<pre><code>npm run electron
# creation d&#39;un sous-répertoire temp-electron
npm start
</code></pre><h4 id="utilisation-en-librairie-dans-un-soft">Utilisation en librairie dans un soft</h4>
<p>Inclure le repertoire teimeta/*.ts
Toutes les instructions pour l&#39;utilisation sont à la fin du fichier tei.ts</p>
<h5 id="aeec-et-trjs-pas-encore-impl-ment-s-">AEEC et TRJS (pas encore implémentés)</h5>
<p>Le soft est intégré à l&#39;outil AEEC et l&#39;outil TRJS. Il est possible d&#39;éditer un des fichiers listé dans la base.</p>
<p>Note: Il pourrait être intéressant d&#39;éditer une série de fichiers d&#39;un coup. Par exemple on pourrait créer un fichier XML et
fusionner le résultat avec un fichier XML quelconque pour modifier d&#39;un coup une série de fichiers.</p>
<pre><code># utiliser la librairie dans une autre application.
import * from &#39;teimeta/tei&#39;
... innerHTML = openODD(dataOdd)
... innerHTML = openODDTEI(dataTei, dataOdd)
... insérer innerHTML dans un éléement du navigateur
... generateTEI(innerHTML)
</code></pre><h2 id="informations-compl-mentaires">Informations complémentaires</h2>
<p>Téléchargement du code source: <a href="https://github.com/christopheparisse/teimeta/">https://github.com/christopheparisse/teimeta/</a></p>
<p>Signaler erreurs et commentaires dans <a href="https://github.com/christopheparisse/teimeta/issues">issues</a>.</p>
<h4 id="license-cc0-public-domain-license-md-">License <a href="LICENSE.md">CC0 (Public Domain)</a></h4>
